访问隐私数据
=

数据存储类型
--

solidity中共有三种数据存储方式  

storage
---

1.storage 中的数据被永久存储。其以键值对的形式存储在 slot 插槽中  

2.storage 中的数据会被写在区块链中（因此它们会更改状态），这就是为什么使用存储非常昂贵的原因  

3.占用 256 位插槽的 gas 成本为 20,000 gas  

4.修改 storage 的值将花费 5,000 gas  

5.清理存储插槽时（即将非零字节设置为零），将退还一定量的 gas  

6.storage 共有 2^256 个插槽，每个插槽 32 个字节数据按声明顺序依次存储，数据将会从每个插槽的右边开始存储，如果相邻变量适合单个 32 字节，然后它们被打包到同一个插槽中否则将会启用新的插槽来存储  


memory
---

1.memory 是一个字节数组，其插槽大小为 256 位（32 个字节）。数据仅在函数执行期间存储，执行完之后，将会被删除。它们不会保存到区块链中  

2.读或写一个字节（256 位）需要 3 gas，为了避免给矿工带来太多工作，在进行 22 次读写操作后，之后的读写成本开始上升  

calldata
---

1.calldata 是一个不可修改的，非持久性的区域，用于存储函数参数，并且其行为基本上类似于 memory  

2.调用外部函数的参数需要 calldata，也可用于其他变量  

3.它避免了复制，并确保了数据不能被修改  

4.带有 calldata 数据位置的数组和结构体也可以从函数中返回，但是不可以为这种类型赋值  

关键字
--

solidity中共有四种关键字  

external
--

external 定义的外部函数可以被其它合约调用。用 external 修饰的外部函数不能作为内部函数直接调用，合约内部调用时需要通过<code>this.function()</code>的方式

public
--

public 定义的函数可以被内部函数或外部消息调用。对用 public 定义的状态变量，系统会自动生成一个 getter 函数  

internal
--

internal 定义的函数和状态变量只能在（当前合约或当前合约派生的合约）内部进行访问  

private
--

private 定义的函数和状态变量只对定义它的合约可见，该合约派生的合约都不能调用和访问该函数及状态变量


安全建议
--

智能合约中的数据是完全公开的，合约中修饰变量的关键字仅限制其调用范围，无法限制数据的读取，将敏感数据记录在合约中是不安全的

